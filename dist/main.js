(()=>{"use strict";const e=document.querySelector(".catalog__list"),t=document.querySelector("#cafe").content.querySelector(".catalog__item"),r=(e,t)=>{const r=e.cloneNode(!0);return((e,t)=>{const{name:r,address:c,landmark:n,cuisine:o,distance:a,time:d,photo:l,business_lunch:s,price:i}=t;e.querySelector(".card__picture").src=l,e.querySelector(".card__picture").alt=r,e.querySelector(".card__name").textContent=r,e.querySelector(".card__address").textContent=c,e.querySelector(".card__distance").textContent=`${a}м`,e.querySelector(".card__landmark").textContent=`Ориентир: ${n}`,e.querySelector(".card__cuisine").textContent=`Кухня: ${o}`,e.querySelector(".card__time").textContent=`${d} мин`,s?(e.querySelector(".card__price").style="display: block",e.querySelector(".card__lunch").textContent="Бизнес-ланч: есть",e.querySelector(".card__price").textContent=`Стоимость бизнес-ланча: ${i} р.`):(e.querySelector(".card__lunch").textContent="Бизнес-ланч: нет",e.querySelector(".card__price").style="display: none")})(r,t),r},c=c=>{let n=c.slice();e.append(...n.map((e=>{const c=r(t,e);return((e,t)=>{const r=e.querySelector(".card__details-button"),c=e.querySelector(".card__share-button");r.addEventListener("click",(t=>{var c,n;t.preventDefault(),n=r,(c=e).querySelector(".card").classList.contains("card--large")?((e,t)=>{e.querySelector(".card").classList.remove("card--large"),t.textContent="Подробнее"})(c,n):((e,t)=>{e.querySelector(".card").classList.add("card--large"),t.textContent="Свернуть"})(c,n)})),c.addEventListener("click",(e=>{e.preventDefault(),(e=>{const t=new URL(window.location);t.searchParams.set("id",e),window.history.pushState(null,"",t.toString())})(t)}))})(c,e.id),c})))},n=document.querySelector(".modal"),o=document.querySelector("#modal").content.querySelector(".modal__card"),a=n.querySelector(".modal__close-button"),d=()=>{n.classList.add("modal--close"),document.removeEventListener("keydown",s)},l=e=>{e.preventDefault(),d()};function s(e){(e=>"Escape"===e.key)(e)&&d()}const i=(e,t)=>{const c=t(e),d=r(o,c);n.querySelector(".modal__card").append(d),a.addEventListener("click",l),document.addEventListener("keydown",s),n.classList.remove("modal--close")},u=document.querySelector(".header__random"),_=e=>{const t=e.slice();return(r=t)[((e,t)=>{if(t>=0){const e=Math.min(0,t),r=Math.max(0,t);return Math.floor(Math.random()*(r-e))+e}return NaN})(0,r.length-1)];var r};var y;y=e=>{const t=e.data,r=new URLSearchParams(window.location.search).get("id");if(c(t),(e=>{u.addEventListener("click",(t=>{t.preventDefault(),(e=>{((e,t)=>{e.querySelector(".card__random-button").addEventListener("click",(()=>{i(t,_),console.log("2154")}))})(i(e,_),e)})(e)}))})(t),r){const e=t.filter((e=>e.id===parseInt(r,10))).shift();i(e,r)}},fetch("https://bandaumnikov.ru/api/test/site/get-index").then((e=>e.json())).then((e=>y(e)))})();